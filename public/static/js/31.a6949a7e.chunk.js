"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[31],{7282:function(e,n,a){a.d(n,{Z:function(){return y}});var t=a(5861),s=a(9439),c=a(7757),r=a.n(c),l=a(1697),i=a(6106),o=a(914),u=a(2385),d=a(135),m=a(2791),f=a(6030),h=a(3053),p=a(6589),x=a(3490),v=a(8880),j=a(7734),b=a(5516),Z=a(184);var k=function(e){var n=e.user.name;return(0,Z.jsxs)(i.Z,{align:"middle",children:[(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--name"),children:(0,Z.jsx)("span",{children:e.user.name})}),(0,Z.jsx)(u.Z,{overlay:e.menuUser,placement:"bottomRight",arrow:!0,className:"".concat(e.className,"--avatar"),children:(0,Z.jsx)(j.C,{style:{backgroundColor:(0,b.Q)(e.user._id)},children:null===n||void 0===n?void 0:n.slice((null===n||void 0===n?void 0:n.indexOf(" "))+1,(null===n||void 0===n?void 0:n.indexOf(" "))+2)})})]})},N=a(7295),g=a(3504),w=a(4432).nI.header,_=x.bf.header;var y=function(e){var n=(0,f.v9)((function(e){return e.user})),a=(0,f.I0)(),c=(0,m.useState)(e.dropdown),x=(0,s.Z)(c,2),j=x[0],b=x[1],y=(0,Z.jsx)(l.Z,{onClick:function(n){e.actionDropdown&&e.actionDropdown(n.key)},children:w.menuDropdown.map((function(e){return(0,Z.jsxs)(l.Z.Item,{children:[(0,Z.jsx)(e.icon,{})," ",e.text]},e.key)}))}),C=(0,Z.jsx)(l.Z,{onClick:function(e){return D(e.key)},children:w.menuUser.map((function(e){return(0,Z.jsxs)(l.Z.Item,{children:[(0,Z.jsx)(e.icon,{})," ",e.text]},e.key)}))}),S=function(){var e=(0,t.Z)(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.getUserDetail(n);case 3:t=e.sent,a((0,p.av)(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),D=function(e){switch(e){case"profile":default:break;case"logout":a((0,p.ix)({isLogin:!1,_id:""}))}};return(0,m.useEffect)((function(){S(n._id),b(e.dropdown)}),[void 0!==n.name,e.dropdown]),(0,Z.jsxs)(i.Z,{align:"middle",justify:"space-between",className:"".concat(_," ").concat(e.className),children:[(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(i.Z,{children:e.dropdown?(0,Z.jsxs)("span",{className:"".concat(_,"__title"),children:[(0,Z.jsx)(u.Z,{overlay:y,placement:"bottomLeft",arrow:!0,children:(0,Z.jsx)("button",{className:"".concat(_,"__title--icon"),children:(0,Z.jsx)(N.Z,{})})}),(0,Z.jsx)(d.Z,{className:"".concat(_,"__title--input"),bordered:!1,value:j,onChange:function(e){return b(e.target.value)},onBlur:function(){e.changeNameProject&&e.changeNameProject(j||e.dropdown)}})]}):(0,Z.jsx)("span",{className:"".concat(_,"__title"),children:e.title})}),e.navigate&&e.navigate.length&&(0,Z.jsx)(i.Z,{className:"".concat(_,"__navigate"),children:e.navigate.map((function(e,n){return(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(g.OL,{to:e.path,className:function(e){var n=e.isActive;return"".concat(_,n?"__navigate--link active":"__navigate--link")},children:e.text})},"header-navigate-".concat(n," "))}))})]}),(0,Z.jsx)(o.Z,{children:(0,Z.jsxs)(i.Z,{align:"middle",children:[(0,Z.jsx)(o.Z,{className:"".concat(_,"__search"),children:(0,Z.jsx)(v.Z,{onSearch:function(e){return console.log(e)}})}),(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(k,{menuUser:C,user:n,className:"".concat(_,"__detail")})})]})})]})}},9031:function(e,n,a){a.r(n),a.d(n,{default:function(){return Se}});var t=a(1413),s=a(7762),c=a(5861),r=a(9439),l=a(7757),i=a.n(l),o=a(6106),u=a(914),d=a(5705),m=a(2426),f=a.n(m),h=a(2791),p=a(6030),x=a(6871),v=a(6442),j=a(9316),b=a(6547),Z=a(5276),k=a(7083),N=a(184);var g=function(e){return(0,h.useEffect)((function(){}),[e.visible]),(0,N.jsx)(Z.Z,{title:e.title||!1,placement:"right",width:550,onClose:function(){return e.closeModal()},visible:e.visible,getContainer:!1,closable:!1,children:(0,N.jsx)(k.Z,{spinning:e.loading,children:e.contentDrawer})})},w=a(7282),_=a(1829),y=a(3490),C=a(4432),S=a(2729),D=a(5478),T=a(5516),A=a(3053),R=a(8880),M=a(7734),P=C.Pb.formMember;var E=function(e){var n,a=e.className,t=e.value,s=e.type,c=e.handleMember,r=e.projectAuthor;return(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(a,"-item"),children:[(0,N.jsx)(u.Z,{xs:6,className:"".concat(a,"-item--avatar"),children:(0,N.jsx)(M.C,{shape:"square",size:55,style:{backgroundColor:(0,T.Q)(t._id),borderRadius:15},children:null===(n=t.name)||void 0===n?void 0:n.slice(0,1)})}),(0,N.jsxs)(u.Z,{xs:16,className:"".concat(a,"-item--desc"),children:[(0,N.jsx)("span",{children:t.name}),(0,N.jsx)("span",{children:t.email})]}),r!==t._id&&(0,N.jsx)(u.Z,{xs:2,children:(0,N.jsx)("button",{onClick:function(){return c(t._id,s)},className:"".concat(a,"-btn"),children:"add"===s?(0,N.jsx)(P.btnSubmit,{}):(0,N.jsx)(P.btnDelete,{})})})]})},I=(C.Pb.formMember,y.zA.member);var z=function(e){var n=(0,p.I0)(),a=(0,p.v9)((function(e){return e.project})),l=(0,p.v9)((function(e){return e.user})),d=(0,h.useState)(),m=(0,r.Z)(d,2),f=m[0],x=m[1],Z=function(){var e=(0,c.Z)(i().mark((function e(n){var c,r,l,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.Z.getUser(n);case 3:if(0===(c=e.sent).length)(0,T.I)("warning","Can't find user!","");else{r=[],l=(0,s.Z)(c);try{for(u=function(){var e=o.value,n=a.members.filter((function(n){return n.user._id===e._id}));r.push((0,t.Z)((0,t.Z)({},e),{},{visible:0===n.length}))},l.s();!(o=l.n()).done;)u()}catch(i){l.e(i)}finally{l.f()}x(r)}e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c.Z)(i().mark((function e(a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postMembers(a,t);case 3:s=e.sent,n((0,j.fZ)(s)),n((0,b.YR)({_pid:a,value:s})),x([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,a){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)(i().mark((function e(a,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteMembers(a,t);case 3:e.sent,n((0,j.EP)(t)),n((0,b.sC)({_pid:a,value:t})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),w=function(e,n){if("delete"===n)g(a._id,e);else{var t={user:e};k(a._id,t)}};return(0,N.jsxs)(o.Z,{children:[(0,N.jsxs)(u.Z,{xs:12,className:"".concat(I,"-search"),children:[(0,N.jsx)(R.Z,{onSearch:function(e){e&&Z(e)}}),(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:24,className:"".concat(I,"-list"),children:f&&f.length>0&&f.map((function(e,n){if(l._id!==e._id&&e.visible)return(0,N.jsx)(E,{projectAuthor:a.author,className:"".concat(I),value:e,type:"add",handleMember:w},"member-project-".concat(n))}))})})]}),(0,N.jsx)(u.Z,{xs:12,className:"".concat(I,"-list"),children:a.members.map((function(e,n){if(l._id!==e.user._id)return(0,N.jsx)(E,{projectAuthor:a.author,className:"".concat(I),value:e.user,type:"delete",handleMember:w},"member-project-".concat(n))}))})]})},O=a(135);var Y=function(e){return(0,N.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(O.Z,{name:e.name,className:"".concat(e.className,"--input"),placeholder:e.placeholder,bordered:!1,value:e.value.name,onChange:function(n){return e.onChange(n.target.value)}})]})},F=a(7528);var U=function(e){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,N.jsx)("span",{children:"Roles"})}),(0,N.jsx)(o.Z,{className:"".concat(e.className),children:(0,N.jsx)(u.Z,{xs:24,children:e.roles.map((function(n,a){if(!n.default)return(0,N.jsxs)(o.Z,{justify:"space-between",align:"middle",className:"".concat(e.className,"--item"),children:[(0,N.jsxs)("div",{className:"".concat(e.className,"--name"),children:[(0,N.jsx)("span",{children:n.name}),(0,N.jsx)("div",{children:8===n.permission.length?(0,N.jsx)(F.Z,{color:"lime",children:"ALL"},"tag-all"):n.permission.map((function(e,n){return(0,N.jsx)(F.Z,{color:"lime",style:{marginRight:3,marginBottom:3,fontSize:"0.6rem"},children:e},"tag-".concat(n))}))})]}),!n.default&&(0,N.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return e.handleDelete(n)},children:(0,N.jsx)(e.icon,{})})]},"role-".concat(a))}))})})]})},V=a(3281),L=V.Z.Option;var B=function(e){return(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(V.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:e.value.permission,onChange:function(n){return e.onChange(n)},tagRender:function(e){var n=e.label,a=e.value,t=e.closable,s=e.onClose;return(0,N.jsx)(F.Z,{color:(0,T.Q)(a),closable:t,onClose:s,style:{marginRight:3},children:n})},children:e.options.map((function(e){return(0,N.jsx)(L,{value:e._id,children:e.name},e._id)}))})]})},Q=C.Pb.formRoles,H=y.zA.roles;var q=function(e){var n=(0,x.UO)(),a=(0,h.useState)({name:"",permission:[]}),s=(0,r.Z)(a,2),l=s[0],d=s[1],m=(0,h.useState)([]),f=(0,r.Z)(m,2),p=f[0],j=f[1],b=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getRoles(n);case 3:a=e.sent,j(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postRoles(n,a);case 3:t=e.sent,console.log(t),t&&(b(n),d({name:"",permission:[]}),(0,T.I)("success","Add role successfully!","")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),k=function(){var e=(0,c.Z)(i().mark((function e(n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteRoles(n,a);case 3:e.sent,b(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){b(n.id)}),[n]),(0,N.jsxs)(o.Z,{children:[(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsx)(Y,{className:"".concat(H,"-field"),name:"name",label:"Name Role *",value:l,onChange:function(e){return d((0,t.Z)((0,t.Z)({},l),{},{name:e}))}}),(0,N.jsx)(B,{options:Q.optionsPermission,className:"".concat(H,"-field"),label:"Permission",value:l,onChange:function(e){return d((0,t.Z)((0,t.Z)({},l),{},{permission:e}))}}),(0,N.jsx)(o.Z,{align:"middle",justify:"center",onClick:function(){return Z(n.id,l)},children:(0,N.jsx)("button",{type:"submit",className:"".concat(H,"-btn"),children:Q.btnSubmit})})]}),(0,N.jsx)(u.Z,{xs:24,children:(0,N.jsx)(U,{className:"".concat(H,"-list"),roles:p,icon:Q.iconDeleteRole,handleDelete:function(e){k(e.project||"",e._id||"")}})})]})};var J=function(e){var n,a=e.className,t=e.value;return(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(a,"-item"),children:[(0,N.jsx)(u.Z,{xs:6,className:"".concat(a,"-item--avatar"),children:(0,N.jsx)(M.C,{shape:"square",size:55,style:{backgroundColor:(0,T.Q)(t._id),borderRadius:15},children:null===(n=t.name)||void 0===n?void 0:n.slice(0,1)})}),(0,N.jsxs)(u.Z,{xs:18,className:"".concat(a,"-item--desc"),children:[(0,N.jsx)("span",{children:t.name}),(0,N.jsx)("span",{children:t.email})]})]})},K=V.Z.Option;var G=function(e){return(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(V.Z,{defaultValue:e.value?e.value._id:"",bordered:!1,className:"".concat(e.className,"--input"),onChange:function(n){return e.onChange(n)},children:e.options.map((function(e){if(!e.default)return(0,N.jsx)(K,{value:e._id,children:e.name},e._id)}))})]})},W=y.zA.setRoles;var X=function(e){var n=(0,x.UO)(),a=(0,p.v9)((function(e){return e.project})),t=(0,h.useState)([]),s=(0,r.Z)(t,2),l=s[0],d=s[1],m=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getRoles(n);case 3:a=e.sent,d(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)(i().mark((function e(n,a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.patchMembers(n,a,t);case 3:s=e.sent,console.log(s),m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a,t){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){m(n.id)}),[n]),(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:24,className:"".concat(W),children:a&&a.members.map((function(e,n){if(a.author!==e.user._id)return(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(W,"-item"),children:[(0,N.jsx)(J,{value:e.user,className:"".concat(W,"--member")}),(0,N.jsx)(G,{options:l,className:"".concat(W,"--field"),label:"Role",value:e.role,onChange:function(n){return function(e,n){f(a._id,n,{role:e})}(n,e.user._id)}})]},"member-role-".concat(n))}))})})},$=a(9418),ee=a(8646),ne=a(2669);var ae=function(e){var n=e.field,a=e.form,t=e.label,s=e.className,c=n.name,r=n.value,l=a.setFieldValue,i=f()(r),o=a.touched[n.name],u=a.errors[n.name],d=u,m=u&&o;return(0,N.jsxs)(ee.Z.Item,{help:!(!d&&!m)&&u,validateStatus:d||m?"error":"",children:[t&&(0,N.jsx)("label",{htmlFor:c,className:"".concat(s,"-label"),children:t}),(0,N.jsx)(ne.Z,{allowClear:!1,id:c,className:"".concat(s,"-input-field"),defaultValue:i||f()(),value:r||f()(),format:"DD/MM/YYYY",onChange:function(e){return l(c,e)},bordered:!1})]})},te=a(9474),se=V.Z.Option;var ce=function(e){var n=e.field,a=e.form,s=e.options,c=e.label,r=(e.disabled,e.className),l=n.name,i=a.touched[n.name],o=a.errors[n.name],u=o,d=o&&i;return(0,N.jsxs)(ee.Z.Item,{help:!(!u&&!d)&&o,validateStatus:u||d?"error":"",children:[c&&(0,N.jsx)("label",{htmlFor:l,className:"".concat(r,"-label"),children:c}),(0,N.jsx)(V.Z,(0,t.Z)((0,t.Z)({mode:"tags",id:l},n),{},{bordered:!1,className:"".concat(r,"-input-field"),defaultValue:[],onChange:function(e){var a={target:{name:l,value:e}};n.onChange(a)},tagRender:function(e){var n=e.label,a=e.value,t=e.closable,s=e.onClose;return(0,N.jsx)(F.Z,{color:(0,T.Q)(a),closable:t,onClose:s,style:{marginRight:3},children:n})},children:s.map((function(e){return(0,N.jsx)(se,{value:e._id,children:e.user.name},e._id)}))}))]})},re=C.Pb.formTask;var le=function(e){var n=(0,p.v9)((function(e){return e.project}));return(0,N.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,N.jsx)(d.Rt,{component:te.Z,name:re.fieldsName.name,type:re.fieldsName.type,className:"".concat(y.zA.form,"--field"),label:re.fieldsName.label}),(0,N.jsxs)(o.Z,{children:[(0,N.jsx)(u.Z,{xs:12,children:(0,N.jsx)(d.Rt,{component:ae,name:re.fieldsExpires.name,className:"".concat(y.zA.form,"--field"),label:re.fieldsExpires.label})}),(0,N.jsx)(u.Z,{xs:12,children:(0,N.jsx)(d.Rt,{component:ce,name:re.fieldsUser.name,className:"".concat(y.zA.form,"--field"),label:re.fieldsUser.label,options:n.members})})]}),(0,N.jsx)($.Z,{content:re.btnSubmit,type:"submit",className:"".concat(y.zA.form,"--btn")})]})};var ie=function(e){var n=(0,h.useState)(f()(e.task.expires)),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.expires)}),[e.task]),(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(ne.Z,{allowClear:!1,className:"".concat(e.className,"--input"),defaultValue:f()(e.task.expires),value:f()(t),format:"DD/MM/YYYY",onChange:function(e){return s(e)},onBlur:function(){return e.changeExpires(t,"expires")}})]})},oe=C.Pb.tasks;var ue=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.name)}),[e.task]),(0,N.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[(0,N.jsx)("span",{className:"".concat(e.className,"--icon"),children:(0,N.jsx)(e.icon,{})}),(0,N.jsx)(O.Z,{name:e.task.name,className:"".concat(e.className,"--input"),defaultValue:e.task.name,value:t,onChange:function(e){return s(e.target.value)},onBlur:function(){return e.changeName(t,"name")},bordered:!1}),(0,N.jsx)("span",{className:"".concat(e.className,"--icon-delete"),onClick:function(){return e.handleTask(e.task._id,"delete-task")},children:(0,N.jsx)(oe.iconDeleteTask,{})})]})},de=V.Z.Option;var me=function(e){var n=(0,x.UO)(),a=(0,h.useState)([]),t=(0,r.Z)(a,2),s=t[0],l=t[1],u=(0,h.useState)(e.task.assignee),d=(0,r.Z)(u,2),m=d[0],f=d[1],p=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getMembers(n);case 3:a=e.sent,l(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){p(n.id),f(e.task.assignee)}),[e.task]),(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(V.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:m,onChange:function(n){f(n),e.changeAssignee(n[n.length-1],"assignee","add")},tagRender:function(n){var a=n.label,t=n.value,s=n.closable,c=n.onClose;return(0,N.jsx)(F.Z,{color:(0,T.Q)(t),closable:s,onClose:function(){c(),e.changeAssignee(t,"assignee","delete")},style:{marginRight:3},children:a})},children:s.map((function(e){return(0,N.jsx)(de,{value:e._id,children:e.user.name},e._id)}))})]})},fe=V.Z.Option,he=C.Pb.tasks.filter;var pe=function(e){var n=(0,h.useState)(e.task.status),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.status)}),[e.task]),(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(V.Z,{bordered:!1,className:"".concat(e.className,"--input"),value:t,onChange:function(n){s(n),e.changeStatus(n,"status")},children:he.map((function(e){return(0,N.jsx)(fe,{value:e.value,children:e.title},e.value)}))})]})},xe=C.Pb.formSubTask;var ve=function(e){return(0,N.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,N.jsx)(d.Rt,{component:te.Z,name:xe.fieldsName.name,type:xe.fieldsName.type,className:"".concat(y.zA.form,"--field"),label:xe.fieldsName.label}),(0,N.jsx)($.Z,{content:xe.btnSubmit,type:"submit",className:"".concat(y.zA.form,"--btn")})]})},je=C.Pb.tasks.subtask;var be=function(e){var n,a=(0,h.useState)((0,N.jsx)(N.Fragment,{})),t=(0,r.Z)(a,2),s=t[0],c=t[1],l=(0,h.useState)(!1),i=(0,r.Z)(l,2),m=i[0],f=i[1];return(0,h.useEffect)((function(){var n=(0,N.jsx)(d.J9,{initialValues:S.hF,validationSchema:D.vP,onSubmit:function(n){f(!1),e.handleSubmit(n)},render:ve});c({title:je.title,temp:n})}),[e.task,m]),(0,N.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsx)(o.Z,{children:(0,N.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return f(!0)},children:je.btnAdd})}),(0,N.jsx)("span",{className:"".concat(e.className,"--title"),children:je.title}),(0,N.jsx)(o.Z,{children:(0,N.jsx)(u.Z,{xs:24,className:"".concat(e.className,"--list"),children:null===(n=e.task.subtask_order)||void 0===n?void 0:n.map((function(n,a){return(0,N.jsxs)(o.Z,{align:"middle",justify:"space-between",className:"".concat(e.className,"--item"),children:[(0,N.jsxs)("div",{children:[(0,N.jsx)(e.icon,{})," ",(0,N.jsx)("span",{children:n.name})]}),!n.complete&&(0,N.jsxs)("div",{className:"".concat(e.className,"--icon"),children:[(0,N.jsx)(je.iconCheck,{onClick:function(){return e.handleChangeSubtask(n,"complete")}}),(0,N.jsx)(je.iconCancel,{onClick:function(){return e.handleChangeSubtask(n,"delete")}})]})]},"subtask-".concat(a))}))})})]}),(0,N.jsx)(_.Z,{loading:!1,contentModal:s.temp,visible:m,closeModal:function(e){f(e)},title:s.title})]})},Ze=O.Z.TextArea;var ke=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.description||"")}),[e.task]),(0,N.jsxs)(o.Z,{justify:"center",className:"".concat(e.className),children:[e.label&&(0,N.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,N.jsx)(Ze,{rows:4,name:e.task.name,className:"".concat(e.className,"--area"),defaultValue:e.task.description,value:t,onChange:function(e){return s(e.target.value)},onBlur:function(){return e.changeDescription(t,"description")},bordered:!1})]})},Ne=y.zA.task;var ge=function(e){var n=(0,x.UO)(),a=(0,h.useState)(e.task),t=(0,r.Z)(a,2),s=t[0],l=t[1],d=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasksDetail(n,a);case 3:t=e.sent,l(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}(),m=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.patchTasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),p=function(){var n=(0,c.Z)(i().mark((function n(a,t){var s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.setLoading(!0),n.next=4,v.Z.deleteTasks(a,t);case 4:s=n.sent,e.changeTask(),s&&(e.setVisibleDrawer(!1),e.setLoading(!1)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,a){return n.apply(this,arguments)}}(),j=function(){var n=(0,c.Z)(i().mark((function n(a,t,c){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"complete"!==c){n.next=8;break}return n.next=4,v.Z.patchTasksComplete(a,t);case 4:n.sent,(0,T.I)("success","Task complete!",""),n.next=12;break;case 8:return n.next=10,v.Z.deleteTasks(a,t);case 10:n.sent,(0,T.I)("success","Delete Task successfully!","");case 12:e.changeTask(),d(a,s._id||""),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,a,t){return n.apply(this,arguments)}}(),b=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postSubtasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t),(0,T.I)("success","Create Subtask successfully!","")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),Z=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postAssigneeTasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),k=function(){var e=(0,c.Z)(i().mark((function e(n,a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteAssigneeTasks(n,a,t);case 3:s=e.sent,l(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a,t){return e.apply(this,arguments)}}(),g=function(a,t,s){var c=e.task._id||"";if(a){var r={};switch(t){case"name":r.name=a,m(n.id,c,r);break;case"status":r.status=a,m(n.id,c,r);break;case"description":r.description=a,m(n.id,c,r);break;case"assignee":"delete"===s?k(n.id,c,a):Z(n.id,c,{member:a});break;case"expires":r.expires=Number(f()(a).utc().format("x")),m(n.id,c,r);break;case"delete-task":p(n.id,a)}}};return(0,h.useEffect)((function(){l(e.task)}),[e.task]),(0,N.jsx)(o.Z,{children:(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsx)(ue,{className:"".concat(Ne,"-header"),icon:e.icon,task:s,changeName:g,handleTask:g}),(0,N.jsx)(me,{className:"".concat(Ne,"-field"),task:s,label:"Assignee",changeAssignee:g}),(0,N.jsx)(ie,{className:"".concat(Ne,"-field"),task:s,label:"Due date",name:"expires",changeExpires:g}),(0,N.jsx)(pe,{className:"".concat(Ne,"-field"),task:s,label:"Status",changeStatus:g}),(0,N.jsx)(ke,{className:"".concat(Ne,"-field"),task:s,label:"Description",name:"description",changeDescription:g}),(0,N.jsx)(be,{className:"".concat(Ne,"-subtask"),task:s,icon:e.icon,handleSubmit:function(a){var t=e.task._id||"";b(n.id,t,a)},handleChangeSubtask:function(e,a){j(n.id,e._id,a)}})]})})},we=C.Pb.tasks;var _e=function(e){return(0,N.jsx)("div",{className:"".concat(e.className),children:(0,N.jsx)(o.Z,{justify:"center",children:(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,N.jsx)("span",{children:e.title})}),(0,N.jsx)(o.Z,{className:"".concat(e.className,"--tasks"),children:(0,N.jsxs)(u.Z,{xs:24,children:[e.tasks.length>0&&e.tasks.map((function(n,a){if(n.status===e.filter)return(0,N.jsx)(o.Z,{className:"".concat(e.className,"--task"),onClick:function(){return e.handleTask(n,e.icon)},children:(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,N.jsxs)(u.Z,{xs:20,className:"".concat(e.className,"--task-name"),children:[(0,N.jsx)(e.icon,{})," ",(0,N.jsx)("span",{children:n.name})]}),(0,N.jsx)("span",{className:"".concat(e.className,"--task-icon"),children:(0,N.jsx)(we.iconMenuTask,{})})]}),(0,N.jsx)(o.Z,{justify:"space-between",children:(0,N.jsxs)("span",{className:"".concat(e.className,"--task-time"),children:[(0,N.jsx)(we.iconDeadline,{})," ",f()(n.expires).format("DD/MM/YYYY")]})})]})},"task-".concat(a))})),(0,N.jsx)(o.Z,{className:"".concat(e.className,"--btn"),children:(0,N.jsx)(u.Z,{xs:24,children:(0,N.jsxs)(o.Z,{align:"middle",onClick:function(){return e.actionDropdown("add-task")},children:[(0,N.jsx)("span",{className:"".concat(e.className,"--btn-icon"),children:(0,N.jsx)(we.iconBtnAdd,{})}),(0,N.jsx)("span",{className:"".concat(e.className,"--btn-text"),children:we.textBtnAdd})]})})})]})})]})})})},ye=C.Pb,Ce=y.zA.project;var Se=function(e){var n=(0,x.UO)(),a=(0,p.I0)(),l=(0,h.useState)(!1),m=(0,r.Z)(l,2),Z=m[0],k=m[1],C=(0,h.useState)(!1),A=(0,r.Z)(C,2),R=A[0],M=A[1],P=(0,h.useState)(!1),E=(0,r.Z)(P,2),I=E[0],O=E[1],Y=(0,h.useState)((0,N.jsx)(N.Fragment,{})),F=(0,r.Z)(Y,2),U=F[0],V=F[1],L=(0,h.useState)((0,N.jsx)(N.Fragment,{})),B=(0,r.Z)(L,2),Q=B[0],H=B[1],J=(0,p.v9)((function(e){return e.projects})),K=(0,p.v9)((function(e){return e.project})),G=(0,h.useState)([]),W=(0,r.Z)(G,2),$=W[0],ee=W[1],ne=function(){var e=(0,c.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getProjectsDetail(n);case 3:t=e.sent,a((0,j.IH)(t)),te(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),ae=function(){var e=(0,c.Z)(i().mark((function e(n,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.patchProjects(n,{name:t});case 3:s=e.sent,a((0,j.IH)(s)),a((0,b.jo)({_pid:n,value:t})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),te=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasks(n);case 3:a=e.sent,ee(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),se=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t,c,r,l,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(!0),t={name:a.name},e.next=5,v.Z.postTasks(n,t);case 5:if(c=e.sent,r=c._id||"",!a.assignee||!c){e.next=27;break}l=(0,s.Z)(a.assignee),e.prev=9,l.s();case 11:if((o=l.n()).done){e.next=18;break}return u=o.value,e.next=15,v.Z.postAssigneeTasks(n,r,{member:u});case 15:e.sent;case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:delete a.assignee;case 27:if(!a||!c){e.next=33;break}return a.expires=Number(f()(a.expires).utc().format("x")),e.next=31,v.Z.patchTasks(n,r,a);case 31:e.sent&&(k(!1),M(!1),ne(n),(0,T.I)("success","Create Task successfully!",""));case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(0),console.log(e.t1);case 38:case"end":return e.stop()}}),e,null,[[0,35],[9,20,23,26]])})));return function(n,a){return e.apply(this,arguments)}}(),ce=function(e,n){var a=(0,N.jsx)(N.Fragment,{}),s="";switch(k(!0),e){case"add-task":a=(0,N.jsx)(d.J9,{initialValues:S.pN,validationSchema:D.vP,onSubmit:function(a){return function(e,n,a){"add-task"===n&&se(K._id,(0,t.Z)((0,t.Z)({},e),{},{status:a}))}(a,e,n)},render:le}),s="Add Task";break;case"add-member":a=(0,N.jsx)(z,{}),s="Members";break;case"add-roles":a=(0,N.jsx)(q,{}),s="Roles";break;case"set-role":a=(0,N.jsx)(X,{}),s="Set Role for Members"}V({temp:a,title:s})},re=function(e,a){O(!0),H((0,N.jsx)(ge,{task:e,icon:a,changeTask:function(){te(n.id)},memberProject:K.members,setVisibleDrawer:function(e){return O(e)},setLoading:function(e){return M(e)}}))};return(0,h.useEffect)((function(){J&&J.length>0?J.forEach((function(e){e._id===n.id&&(te(e._id),a((0,j.IH)(e)))})):ne(n.id)}),[n]),(0,h.useEffect)((function(){Z||V({temp:(0,N.jsx)(N.Fragment,{}),title:""})}),[Z]),(0,N.jsx)(o.Z,{className:"".concat(e.className," ").concat(Ce),children:(0,N.jsxs)(u.Z,{xs:24,children:[(0,N.jsx)(w.Z,{className:y.KN.header,dropdown:K.name,actionDropdown:ce,changeNameProject:function(e){return ae(K._id,e)}}),(0,N.jsx)("div",{className:"".concat(Ce,"__list"),children:(0,N.jsx)("div",{className:"".concat(Ce,"__list--scroll"),children:ye.tasks.filter.map((function(e,n){return(0,N.jsx)(_e,{actionDropdown:function(n){return ce(n,e.value)},className:"".concat(Ce,"__list-tasks"),title:e.title,tasks:$,filter:e.value,icon:e.icon,handleTask:re},"tasks-".concat(n))}))})}),(0,N.jsx)(_.Z,{loading:R,contentModal:U.temp,visible:Z,closeModal:function(e){k(e)},title:U.title}),(0,N.jsx)(g,{loading:R,visible:I,closeModal:function(){return O(!1)},contentDrawer:Q})]})})}}}]);
//# sourceMappingURL=31.a6949a7e.chunk.js.map